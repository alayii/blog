---
title: SICP 笔记（2）
date: 2020-09-18T09:06:59.607Z
draft: true
---
# Building Abstractions with Data

在程序语言中组合数据和组合程序的原因是一样的，为了以下几点：

* 提升我们设计程序时的概念性层级
* 提高设计的模块化
* 加强语言的表达能力

分离数据的表示和数据如何使用被称为 data abstraction（数据抽象），它可以使程序更容易设计，维护和修改。

抽象是一种应对复杂度的手法。

## 数据抽象

数据抽象是分离数据如何被使用和数据如何由更基础的数据构建的细节的一种方法。

数据抽象的基本思想是让使用复合数据对象的程序，在所谓“抽象数据”上操作（可以理解为抽象数据是一个操作单元，程序可以直接操作它，而无需理解其具体表示）。

### Abstraction Barriers

下方图内的横线表示了 abstraction barriers，它们把系统分成了不同的层级。

![](/images/uploads/sicp-figure-2.1.svg)

每一层的 procedure 作为接口定义了 abstraction barriers，也连接了不同的层级。


限制依赖数据表示的 procedure 到只有较少的几个，有利于设计程序和未来的修改。


### 什么是数据

通常，我们可以认为数据是由一些选择器和构造器定义的，以及这些 procedure 为了成为有效的表示必须满足指定的条件（condition）。

pair 是 scheme 语言内置的数据结构，使用 cons, car, cdr 来实现。但我们实际上可以不使用任何数据结构，只用 procedure 实现 cons, car, cdr。

```scheme
(define (cons x y)
  (define (dispatch m)
    (cond ((= m 0) x)
          ((= m 1) y)
          (else 
           (error "Argument not 0 or 1:
                   CONS" m))))
  dispatch)

(define z (cons x y))
(define (car z) (z 0))
(define (cdr z) (z 1))
```

cons 返回了 dispatch 这个 procedure，z 则是这个 procedure，当 `(car z)` 的时候，应用了 `(dispatch 0)`，按照 dispatch 的定义，于是会返回 x，类似的 `(cdr z)`，会相应的返回 y。

于是这个实现满足了 pair 的条件。

将 procedure 当作对象操作，自动提供了表示复合数据的能力。这种过程式的数据表示方式的编程风格，被称为 message passing（消息传递）。

